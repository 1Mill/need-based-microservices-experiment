FROM node:13

WORKDIR /app

COPY package.json package-lock.json ./
RUN npm install

COPY . .

ENV HOST 0.0.0.0

ENV PORT ${PORT}
ENV PRODUCT_REDIS_HOST ${PRODUCT_REDIS_HOST}
ENV PRODUCT_REDIS_PORT ${PRODUCT_REDIS_PORT}
ENV PRODUCT_RIVER_URL ${PRODUCT_RIVER_URL}

EXPOSE ${PORT}

CMD ["npm", "run", "start"]
